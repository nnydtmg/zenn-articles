---
title: "HashiCorp Japan Meetupに参加してきた"
emoji: "🗂"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["terraform","meetup","blog"]
published: false
---

# はじめに



# HashiCorpとは
この記事を読んでいる皆さんはご存知の方がほとんどだと思いますが、はじめに紹介だけさせて頂ければと思います。

HashiCorp社はIaC(Infrastructure as Code)の界隈では有名な、Terraformを開発している会社です。
<!--HashiCorpの紹介-->
そんなHashiCorp社の日本MeetUp初回がありましたので、その参加レポートを書いてみます！
今回は本社からCTOの方も登壇されて非常に貴重な会となっていました。


# 登壇者
CTO：The Rise of Platform Engineering
クラメそ佐藤：Terraform Cloudを使ってStateファイルを楽に管理する
パーソルキャリアKenny Song：WaypointでCDパイプライン


# CTO
・DevがAppを使うのは価値があること
・Opsがクラウドを構築する：様々なプラットフォーム：これが負担に

アプリケーションの一貫性を保つことができる、Terraformを使えば

チケット管理していたものをAPIでインフラ構築依頼ができるようになる

Devチームがインフラを意識せずにAPI呼び出しでインフラ構築ができる、ライフサイクルを一貫して管理できる、コードしてインフラを管理できる（Provision

Vaultが使えるのでマシン同士のSecurityも担保できる
Boundaryで人とマシンのセキュリテイも担保

Connect　Consoleですべてのアプリケーションを管理することでサービスメッシュのような使い方、ネットワークの自動化ができる

Runtime Nomad/k8sのようなイメージ。waypointは内部開発者ポータル

PreProductionとして、CICDとの統合とObservabilityと統合することでプラットフォームとして、価値を見出すことができる

クラウドで始める時のフェーズ１
たくさんのアプリケーションが様々なプラットフォームに存在し、様々な混乱が生じる
アプリとプラットフォームの間に、セキュリティ、コンプライアンス、コストの複雑性がある

フェーズ２
単一のプラットフォームを間に挟むことで中間のセキュリティ、コンプライアンス、コストの管理を一元化する（プラットフォームチームに）

フェーズ３
プライベートクラウドについても、Terraformは利用できる（VMwareやシスコ）
完全にすべてのプラットフォームを一元化できる

問題はプラットフォームチーム
始めた当初はとても難しい
まずはパイプラインを考える、TerraformCloudを使うとどのクラウドでも大丈夫
これをプラットフォームの全体のスタートとする

その先にVaultでセキュリティを適用する

セキュリティ以上のレイヤはすべてプラットフォームとしてサービスとして提供すr

Devのソースとメタデータをまとめてwaypointとして、terraformの構築が必要か判断するパイプラインを考えると、同じパイプラインでインフラ・アプリのすべてが対応できる

プラットフォームチームはパイプラインが正常に動いているかを見れば良いだけ

基盤としてパイプラインがない場合非常に難しいので、まずは自動化する

HashiCorpは様々なツールを提供して、利用者でビルディングブロックのように組み合わせて利用してほしい

## 質問
1. はしCorp製品のツール間の機能が明確
会社の発祥に関わる部分、10年前にオペレーションツールがひどいと感じた
当時から０ベースで考えていた。それぞれにソリューションがあるか判断していた
Git、CircleCI、Jenkins、DataDogは存在していて、それは良いものだったが、デプロイツールがいまいちなかった
この部分は個別のレゴのように設計していた
２、３年かけて全体のツールを作る想定だったが、10年かけても終わらない笑

2. ChatGPTとかと連携は
可能性は模索しているものの、90％正確なものはできるものの、残りの部分はカスタマイズする
今時点でもそれなりのものはできている

3. 10年間でどう変わったか
10年前と比べると、会社の成熟度が増えた
ツールがなかったのが原因
クラウドの普及が一緒に成長できた
マインドセットの向上
レイヤー化されたアプローチ（VMWareにフォーカス）されていて、自動化の範囲はそこまでで、それ以上はアプリとされていた
既存のアンシブルなどは標準化されていなかったので、複雑性が増していた印象
アブストラクションのレイヤが上がってきたので、プラットフォームとして考えて全体を自動化できるようになった

4. プラットフォームチームはどのようにバラバラな開発チームを統合するのか
簡単な答えがあるわけではない、いろんな考えがある
ビジネスに向けるのか、開発者のやりやすさによるのかの意思決定が必要
選択肢は無数にある、会社全体として何がいいのかを考えるべき
Jiraなどの管理ツールはまとめることでタスクの依存関係は担保して複雑性は軽減できる



# クラスメソッド：佐藤雅樹
TerraformCloudを使ってstateファイルを楽に管理する

・管理用リソースの管理を負担を感じている
・変更管理を簡単に管理したい
・アクセスコントロールした
→terraformcloud

stateファイルとは、、、、

管理がかなり大事

・ローカル
いない
デフォルト設定でシンプルではある
故障・紛失で使用できなくなる・共有できない・競合が起きる

・クラウドストレージサービス
多い
ファイル共有が簡単・ファイルアクセスロックができる
この管理用リソースの管理が悩ましい、、

・terraformcloud
真ん中
アカウントごとに管理用リソースを作る負荷がかかる
terraformcloudで楽になる
自前で管理リソースの準備が不要
Stateロック機能が標準搭載
tfファイルにorganization/workspace情報を記載するとOK
Githubなどと繋ぐこともできる
変更履歴をGUIで確認できる
変更差分も見やすい、Gitの差分みたい
ロールバックも可能（インフラ変更は別途Runが必要、Stateのみ戻す）
アクセス制御も簡単にできる
Freeプランもある

<!--後日スライド-->

# Kenny Song :パーソルキャリア
WaypointでCDパイプラインを抽象化

アプリ開発がメインのキャリア

インフラに向けて言いたい
アプリをデプロイしたいだけ、yaml,toml書きたくない、仕方なく書いている

→waypointでできる
様々なインプットファイル（Dockerfile,CICD定義などが必要
様々なものをHCLで簡潔に
アプリ版Terraformのイメージ

中央集権的なサーバーが必要、ランナーをアプリをデプロイする環境ごとに準備する（Dockerでも何でも

課題がいくつか

クレデンシャル情報にも簡単にアクセス可能（Terraform管理していれば

ECS、Lambda（OCIイメージ）、EC2（AutoScaringGroup）としてもデプロイ可能
ALBを作成しR53へレコード作成することもできる

<!--スライド-->






